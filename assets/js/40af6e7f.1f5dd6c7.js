"use strict";(self.webpackChunkautometa=self.webpackChunkautometa||[]).push([[935],{9613:(e,t,n)=>{n.d(t,{Zo:()=>d,kt:()=>g});var a=n(9496);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,o=function(e,t){if(null==e)return{};var n,a,o={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=a.createContext({}),c=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):r(r({},t),e)),n},d=function(e){var t=c(e.components);return a.createElement(l.Provider,{value:t},e.children)},p="mdxType",m={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},u=a.forwardRef((function(e,t){var n=e.components,o=e.mdxType,i=e.originalType,l=e.parentName,d=s(e,["components","mdxType","originalType","parentName"]),p=c(n),u=o,g=p["".concat(l,".").concat(u)]||p[u]||m[u]||i;return n?a.createElement(g,r(r({ref:t},d),{},{components:n})):a.createElement(g,r({ref:t},d))}));function g(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var i=n.length,r=new Array(i);r[0]=u;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s[p]="string"==typeof e?e:o,r[1]=s;for(var c=2;c<i;c++)r[c]=n[c];return a.createElement.apply(null,r)}return a.createElement.apply(null,n)}u.displayName="MDXCreateElement"},5766:(e,t,n)=>{n.r(t),n.d(t,{contentTitle:()=>l,default:()=>m,frontMatter:()=>s,metadata:()=>c,toc:()=>d});var a=n(5882),o=n(950),i=(n(9496),n(9613)),r=["components"],s={},l="Introduction",c={unversionedId:"ui-testing/page-component-model/intro",id:"ui-testing/page-component-model/intro",title:"Introduction",description:"Page Component Model is an interpretation of the Page Object Model which intends to make Selenium automation easy.",source:"@site/docs/2_ui-testing/1_page-component-model/1_intro.md",sourceDirName:"2_ui-testing/1_page-component-model",slug:"/ui-testing/page-component-model/intro",permalink:"/autometa/docs/ui-testing/page-component-model/intro",editUrl:"https://github.com/Bendat/autometa/docs/2_ui-testing/1_page-component-model/1_intro.md",tags:[],version:"current",sidebarPosition:1,frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Flags",permalink:"/autometa/docs/bdd/cucumber/Configuration/flags"},next:{title:"Pages",permalink:"/autometa/docs/ui-testing/page-component-model/pages"}},d=[{value:"At a Glance",id:"at-a-glance",children:[],level:2},{value:"Lazy Loading",id:"lazy-loading",children:[],level:2},{value:"Scoped Searching",id:"scoped-searching",children:[],level:2},{value:"Zero Instantiation",id:"zero-instantiation",children:[],level:2},{value:"Declarative Model",id:"declarative-model",children:[],level:2},{value:"Automatic Waiting",id:"automatic-waiting",children:[],level:2},{value:"Human Mode/Slow Mode",id:"human-modeslow-mode",children:[],level:2},{value:"Logging (WIP)",id:"logging-wip",children:[],level:2},{value:"Automatic Staleness Handling",id:"automatic-staleness-handling",children:[],level:2}],p={toc:d};function m(e){var t=e.components,n=(0,o.Z)(e,r);return(0,i.kt)("wrapper",(0,a.Z)({},p,n,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"introduction"},"Introduction"),(0,i.kt)("p",null,(0,i.kt)("strong",{parentName:"p"},"Page Component Model")," is an interpretation of the Page Object Model which intends to make Selenium automation easy."),(0,i.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"caution")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"This is an experimental, WIP library that is not yet rigorously tested and should not be considered stable. ",(0,i.kt)("inlineCode",{parentName:"p"},"Semver")," versioning is not yet in place."))),(0,i.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"tip")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"This library requires a reflect poly-fill like ",(0,i.kt)("a",{parentName:"p",href:"https://www.npmjs.com/package/reflect-metadata"},(0,i.kt)("inlineCode",{parentName:"a"},"reflect-metadata")),".\nEnsure it's called early in your code, preferably in a setup script"))),(0,i.kt)("p",null,"Autometa Page Component Model is a declarative page object model library for ",(0,i.kt)("inlineCode",{parentName:"p"},"TypeScript")," which streamlines the definition\nof page objects for Selenium users on node. It aims to automatically create and wire together all your page objects seamlessly\nso you can focus on writing tests."),(0,i.kt)("p",null,"This package acts as an opinionated wrapper over Selenium, and attempts to minimize your direct contact with the WebDriver\nor WebElements."),(0,i.kt)("p",null,"Components are automatically scoped to their parent for faster searching, and lazily loaded for faster loading and reducing brittleness."),(0,i.kt)("h2",{id:"at-a-glance"},"At a Glance"),(0,i.kt)("p",null,"Autometa PCM defines pages with simple classes and decorators."),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts",metastring:"title='Example Home Page Page Object Model'",title:"'Example",Home:!0,Page:!0,Object:!0,"Model'":!0},"export class MyHomePage extends WebPage {\n  // reference pages which are navigable from the home page\n  @page()\n  results: ResultsPage;\n\n  @page()\n  signInPage: SignInPage;\n\n  // zero instantiation/initialization. The Autometa does it for you.\n  @component(By.id('search-bar'))\n  searchBarInput: TextInput;\n\n  @component(By.css('.style-container button'), Until.isVisible, 1500)\n  searchButton: Button;\n}\n")),(0,i.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},(0,i.kt)("inlineCode",{parentName:"p"},"Button")," and ",(0,i.kt)("inlineCode",{parentName:"p"},"TextInput")," are some of the default ",(0,i.kt)("a",{parentName:"p",href:"components"},"Components")," provided\nby Autometa POM. Building your own custom components and connecting them to your page\nobjects is trivial and encouraged. While there are patterns provided for dealing\nwith containers, where possible it's best to define a custom component."))),(0,i.kt)("p",null,"Writing tests is also easy:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-ts",metastring:"title='Example with Jest or Mocha'",title:"'Example",with:!0,Jest:!0,or:!0,"Mocha'":!0},"import { siteUrl, myDriver } from '../setup';\nimport { MyHomePage } from '../homepage';\n\ndescribe('Searching on our homepage', () => {\n  const site = Site(siteUrl, myDriver);\n  let home: MyHomePage;\n\n  beforeEach(async () => {\n    home = await site.Browse(MyHomePage);\n  });\n\n  it('should search for puppies', () => {\n    await home.searchBarInput.write('puppies');\n    await home.searchButton.click();\n    await site.waitForTitleIs('Search Results');\n\n    const resultsCount = await site.results.length;\n    const searchText = await site.results.searchBar.text;\n\n    expect(resultsCount).toBe(5);\n    expect(searchText).toBe('puppies');\n  });\n\n  afterEach(async () => {\n    await site.quit();\n  });\n});\n")),(0,i.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,i.kt)("div",{parentName:"div",className:"admonition-heading"},(0,i.kt)("h5",{parentName:"div"},(0,i.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,i.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,i.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"caution")),(0,i.kt)("div",{parentName:"div",className:"admonition-content"},(0,i.kt)("p",{parentName:"div"},"Almost all interactions with selenium are asynchronous. Ensure you await or promise\nchain your actions."))),(0,i.kt)("h1",{id:"benefits"},"Benefits"),(0,i.kt)("p",null,"This library aims to make the life of automation engineers easier by automating away the challenges\ncommonly faced writing stable selenium tests:"),(0,i.kt)("h2",{id:"lazy-loading"},"Lazy Loading"),(0,i.kt)("p",null,"Your entire page structure is initialized once you start your site, however your WebElements are\nloaded ",(0,i.kt)("em",{parentName:"p"},"only")," when they are directly accessed, improving start up performance and reducing flakiness\ndue to changes to parts of the page your tests aren't interested in."),(0,i.kt)("h2",{id:"scoped-searching"},"Scoped Searching"),(0,i.kt)("p",null,"When it's time for one of your Components to load it's underlying ",(0,i.kt)("inlineCode",{parentName:"p"},"WebElement"),", it will only be searched\nfor as a descendent of it's parent Component. If the parent is a page, the ",(0,i.kt)("inlineCode",{parentName:"p"},"WebDriver")," is used instead."),(0,i.kt)("p",null,"Advantages:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Improves search performance - avoid searching the whole DOM for a WebElement."),(0,i.kt)("li",{parentName:"ul"},"Simplifies Locators - searching for a tag by class will not find elements in other parts of the page. No need for complex CSS queries.")),(0,i.kt)("h2",{id:"zero-instantiation"},"Zero Instantiation"),(0,i.kt)("p",null,"No need to instantiate your page objects or worry about their constructors and dependencies. Each Component\nis automatically generated and assigned when your test starts."),(0,i.kt)("h2",{id:"declarative-model"},"Declarative Model"),(0,i.kt)("p",null,"Pages are models, not programs. Avoid logic in your page objects so you can focus on writing tests."),(0,i.kt)("h2",{id:"automatic-waiting"},"Automatic Waiting"),(0,i.kt)("p",null,"No need for explicit or implicit waits. Each Component knows what it needs to be considered valid. After discovering a WebElement,\nit will automatically be waited for. Uses ",(0,i.kt)("inlineCode",{parentName:"p"},"isLocated")," by default but can be overridden with decorators and by subclasses. Can be disabled."),(0,i.kt)("h2",{id:"human-modeslow-mode"},"Human Mode/Slow Mode"),(0,i.kt)("p",null,"Set a slow mode time to force selenium to run at a speed you can actually watch. Useful for debugging."),(0,i.kt)("h2",{id:"logging-wip"},"Logging (WIP)"),(0,i.kt)("p",null,"Automatically log your actions as they happen with readable ",(0,i.kt)("inlineCode",{parentName:"p"},"info")," logs. Currently only node's default console\nis supported. Logs will show as an action, followed by a 'breadcrumb' of the component executing that action.\nThe breadcrumb is the the full path to the component in the page model"),(0,i.kt)("p",null,"Example log:"),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-sh"},'  console.info\n    Clicking On IndexPage[$root] >\n      GridContainer[grid, By(css selector, .grid)] >\n        SimpleTypeDiv[simpleTypes, By(css selector, div:nth-of-type(1))] >\n          Button[button, By(css selector, button)]( { text: "Click Me" } )\n\n      at Button.#logActionOccurring (src/lib/meta-types/component.ts:558:17)\n\n  console.info\n    Searching for [ListItem, By(css selector, li)] in IndexPage[$root] >\n      GridContainer[grid, By(css selector, .grid)] >\n        SimpleTypeDiv[simpleTypes, By(css selector, div:nth-of-type(1))] >\n          UnorderedList[unorderedList, By(css selector, ul)]\n\n      at ElementArray.<anonymous> (src/lib/meta-types/component.ts:540:17)\n\n  console.info\n    Reading Text From IndexPage[$root] >\n      GridContainer[grid, By(css selector, .grid)] >\n        SimpleTypeDiv[simpleTypes, By(css selector, div:nth-of-type(1))] >\n          UnorderedList[unorderedList, By(css selector, ul)] >\n            ListItem[0, By(css selector, li)]( { text: "ul item 1" } )\n')),(0,i.kt)("h2",{id:"automatic-staleness-handling"},"Automatic Staleness Handling"),(0,i.kt)("p",null,"Sometimes elements move in the DOM, or a form causes a refreshed page, rendering your WebElements stale.\nComponents automatically detect when their underlying WebElement is stale and attempt to rediscover it\nat least once and continuing your action before simply failing. Refreshes will propagate through out the page\nmodel if necessary."),(0,i.kt)("p",null,"Alternatively, the entire Page Model can be forced to lazily reinitialize if you know it will be stale due to some\naction occurring."))}m.isMDXComponent=!0}}]);